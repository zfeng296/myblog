import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as s,c as n,e}from"./app-sZwCoPd_.js";const i={},l=e(`<h1 id="nginx访问日志轮询切割" tabindex="-1"><a class="header-anchor" href="#nginx访问日志轮询切割" aria-hidden="true">#</a> Nginx访问日志轮询切割</h1><h2 id="具体切割脚本如下" tabindex="-1"><a class="header-anchor" href="#具体切割脚本如下" aria-hidden="true">#</a> 具体切割脚本如下</h2><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /server/script/cut_nginx_log.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#！/bin/sh</span>
<span class="token assign-left variable">Dateformat</span><span class="token operator">=</span><span class="token variable"><span class="token variable">\`</span><span class="token function">date</span> +%Y%m%d<span class="token variable">\`</span></span>
<span class="token assign-left variable">Basedir</span><span class="token operator">=</span><span class="token string">&quot;/application/nginx&quot;</span>
<span class="token assign-left variable">Nginxlogdir</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$Basedir</span>/logs&quot;</span>
<span class="token assign-left variable">Logname</span><span class="token operator">=</span><span class="token string">&quot;access_www&quot;</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token variable">$Nginxlogdir</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> <span class="token variable">$Nginxlogdir</span><span class="token operator">||</span><span class="token builtin class-name">exit</span> <span class="token number">1</span>
<span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token variable">\${Logname}</span>.log <span class="token punctuation">]</span><span class="token operator">||</span><span class="token builtin class-name">exit</span> <span class="token number">1</span>
/bin/mv <span class="token variable">\${Logname}</span>.log <span class="token variable">\${Dateformat}</span>_<span class="token variable">\${Logname}</span>.log
<span class="token variable">$Basedir</span>/sbin/nginx <span class="token parameter variable">-s</span> reload
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="定时" tabindex="-1"><a class="header-anchor" href="#定时" aria-hidden="true">#</a> 定时</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cat &gt;&gt;/var/spool/cron/root &lt;&lt; EOF
00 00 * * * /bin/sh /server/script/cut_nginx_log.sh &gt;/dev/null 2&gt;&amp;1
EOF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),t=[l];function r(o,p){return s(),n("div",null,t)}const v=a(i,[["render",r],["__file","20220101.html.vue"]]);export{v as default};
